<!doctype html>
<html lang="pt-BR" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Card√°pio Digital</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body { box-sizing: border-box; }
    * { scrollbar-width: thin; scrollbar-color: #d97706 #1a1a1a; }

    .menu-item { transition: all 0.25s ease; cursor: pointer; }
    .menu-item:hover { transform: translateY(-2px); border-color: rgba(217,119,6,.55) !important; }

    .badge { animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.85} }

    .whatsapp-btn { animation: bounce 2s infinite; }
    @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-5px)} }

    .delivery-animation { position: relative; height: 50px; }
    .delivery-bike { animation: bikeMove 3s ease-in-out infinite; }
    .delivery-person { animation: personBounce 0.5s ease-in-out infinite; }
    .delivery-box { animation: boxShake 0.6s ease-in-out infinite; }
    .delivery-sparkle { animation: sparkle 1.5s ease-in-out infinite; }

    @keyframes bikeMove {
      0%,100%{transform:translateX(0) rotate(0deg)}
      25%{transform:translateX(10px) rotate(2deg)}
      50%{transform:translateX(0) rotate(0deg)}
      75%{transform:translateX(-10px) rotate(-2deg)}
    }
    @keyframes personBounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-3px)} }
    @keyframes boxShake {
      0%,100%{transform:rotate(0deg) scale(1)}
      25%{transform:rotate(-5deg) scale(1.05)}
      75%{transform:rotate(5deg) scale(1.05)}
    }
    @keyframes sparkle { 0%,100%{opacity:0;transform:scale(.8)} 50%{opacity:1;transform:scale(1.2)} }

    .category-icon { transition: transform 0.3s ease; }
    .category-header:hover .category-icon { transform: scale(1.1); }

    /* MODALS */
    .modal-overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      padding: 16px;
    }
    .modal-overlay.active{ display: flex; }

    .modal-content{
      width: 100%;
      max-width: 900px;
      border-radius: 18px;
      background: linear-gradient(135deg, #262626 0%, #1f1f1f 100%);
      border: 1px solid #404040;
      box-shadow: 0 20px 60px rgba(0,0,0,.5);
    }

    .game-frame{
      width: 100%;
      height: 70vh;
      max-height: 520px;
      border: 0;
      border-radius: 14px;
      background: #000;
    }

    /* Cart floating button */
    .cart-fab{
      position: fixed;
      right: 16px;
      bottom: 100px;
      z-index: 2500;
      display: none;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 999px;
      background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
      color: #1a1a1a;
      font-weight: 800;
      box-shadow: 0 14px 30px rgba(217,119,6,.25);
      cursor: pointer;
      user-select: none;
    }
    .cart-badge{
      min-width: 28px;
      height: 28px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      background: rgba(26,26,26,.92);
      color: #fef3c7;
      font-weight: 800;
      padding: 0 8px;
    }

    @view-transition { navigation: auto; }
  </style>
</head>

<body class="h-full">
  <div id="app-wrapper" class="h-full w-full overflow-auto"
       style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);">

    <!-- Header -->
    <header class="relative overflow-hidden"
            style="background: linear-gradient(135deg, #b91c1c 0%, #991b1b 50%, #7f1d1d 100%);">
      <div class="absolute inset-0 opacity-10">
        <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
          <pattern id="pattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
            <circle cx="10" cy="10" r="1" fill="#d97706" />
          </pattern>
          <rect width="100%" height="100%" fill="url(#pattern)" />
        </svg>
      </div>

      <div class="relative px-6 py-8 text-center">
        <div class="mb-4 flex justify-center">
          <div class="w-20 h-20 rounded-full flex items-center justify-center"
               style="background: linear-gradient(135deg, #d97706 0%, #b45309 100%); box-shadow: 0 4px 20px rgba(217, 119, 6, 0.4);">
            <svg class="w-10 h-10" fill="#1a1a1a" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" />
            </svg>
          </div>
        </div>

        <h1 id="restaurant-name" class="text-3xl md:text-4xl font-bold mb-2"
            style="font-family:'Playfair Display',serif;color:#fef3c7;">Sabor &amp; Arte</h1>
        <p id="slogan" class="text-lg opacity-90"
           style="font-family:'Poppins',sans-serif;color:#fde68a;">Sabor que conquista no primeiro pedido</p>

        <div class="mt-6 inline-block px-6 py-3 rounded-full"
             style="background: linear-gradient(135deg, #d97706 0%, #b45309 100%); box-shadow: 0 4px 15px rgba(217, 119, 6, 0.3);">
          <p class="text-sm font-semibold" style="font-family:'Poppins',sans-serif;color:#1a1a1a;">
            üî• <span id="promo-title">Promo√ß√£o do Dia</span>: <span id="promo-description">20% OFF em todos os lanches!</span>
          </p>
        </div>
      </div>
    </header>

    <!-- Menu Content -->
    <main class="px-4 py-6 max-w-2xl mx-auto" style="font-family:'Poppins',sans-serif;">

      <!-- Lanches -->
      <section class="mb-8">
        <div class="category-header flex items-center gap-3 mb-4 pb-2" style="border-bottom:2px solid #d97706;">
          <span class="category-icon text-3xl">üçî</span>
          <h2 class="text-2xl font-bold" style="color:#d97706;font-family:'Playfair Display',serif;">Lanches</h2>
        </div>

        <div class="space-y-3">
          <div class="menu-item rounded-xl p-4 relative"
               onclick="addToCart('Smash Burger Especial', 32.90, 'üçî')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="badge absolute -top-2 -right-2 px-3 py-1 rounded-full text-xs font-bold"
                 style="background:linear-gradient(135deg,#d97706 0%,#b45309 100%);color:#1a1a1a;">‚≠ê Mais Vendido</div>
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Smash Burger Especial</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Dois hamb√∫rgueres smash 90g, cheddar, bacon, cebola caramelizada e molho especial.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 32,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4"
               onclick="addToCart('X-Bacon Gourmet', 28.90, 'ü•ì')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">X-Bacon Gourmet</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Hamb√∫rguer 180g, queijo prato, bacon, alface e maionese trufada.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 28,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4 relative"
               onclick="addToCart('X-Salada Cl√°ssico (Promo)', 19.90, 'ü•¨')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #b91c1c;">
            <div class="badge absolute -top-2 -right-2 px-3 py-1 rounded-full text-xs font-bold"
                 style="background:linear-gradient(135deg,#b91c1c 0%,#991b1b 100%);color:#fef3c7;">üè∑Ô∏è Promo√ß√£o</div>
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">X-Salada Cl√°ssico</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Hamb√∫rguer 150g, queijo, alface, tomate, cebola e molho ros√©.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right">
                <span class="text-sm line-through opacity-60" style="color:#d6d3d1;">R$ 24,90</span>
                <span class="text-2xl font-bold block" style="color:#d97706;">R$ 19,90</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Pizzas -->
      <section class="mb-8">
        <div class="category-header flex items-center gap-3 mb-4 pb-2" style="border-bottom:2px solid #d97706;">
          <span class="category-icon text-3xl">üçï</span>
          <h2 class="text-2xl font-bold" style="color:#d97706;font-family:'Playfair Display',serif;">Pizzas</h2>
        </div>

        <div class="space-y-3">
          <div class="menu-item rounded-xl p-4 relative"
               onclick="addToCart('Pepperoni Supreme', 49.90, 'üçï')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="badge absolute -top-2 -right-2 px-3 py-1 rounded-full text-xs font-bold"
                 style="background:linear-gradient(135deg,#ec4899 0%,#db2777 100%);color:#fff;">üíï Queridinho</div>
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Pepperoni Supreme</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Mussarela premium, pepperoni artesanal e azeite trufado.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 49,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4"
               onclick="addToCart('Quatro Queijos', 52.90, 'üßÄ')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Quatro Queijos</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Mussarela, gorgonzola, parmes√£o e catupiry.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 52,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4"
               onclick="addToCart('Margherita Artesanal', 45.90, 'üåø')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Margherita Artesanal</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Mussarela de b√∫fala, manjeric√£o e tomate fresco.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 45,90</span></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Pratos -->
      <section class="mb-8">
        <div class="category-header flex items-center gap-3 mb-4 pb-2" style="border-bottom:2px solid #d97706;">
          <span class="category-icon text-3xl">üçù</span>
          <h2 class="text-2xl font-bold" style="color:#d97706;font-family:'Playfair Display',serif;">Pratos Principais</h2>
        </div>

        <div class="space-y-3">
          <div class="menu-item rounded-xl p-4 relative"
               onclick="addToCart('Fil√© √† Parmegiana', 59.90, 'üçù')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="badge absolute -top-2 -right-2 px-3 py-1 rounded-full text-xs font-bold"
                 style="background:linear-gradient(135deg,#d97706 0%,#b45309 100%);color:#1a1a1a;">‚≠ê Mais Vendido</div>
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Fil√© √† Parmegiana</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Molho pomodoro, queijo gratinado, arroz e fritas.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 59,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4"
               onclick="addToCart('Salm√£o Grelhado', 68.90, 'üêü')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Salm√£o Grelhado</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Com ervas, pur√™ de batata doce e legumes.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 68,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4"
               onclick="addToCart('Risoto de Funghi', 54.90, 'üçÑ')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Risoto de Funghi</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Arroz arb√≥reo cremoso e parmes√£o.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 54,90</span></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Bebidas -->
      <section class="mb-8">
        <div class="category-header flex items-center gap-3 mb-4 pb-2" style="border-bottom:2px solid #d97706;">
          <span class="category-icon text-3xl">ü•§</span>
          <h2 class="text-2xl font-bold" style="color:#d97706;font-family:'Playfair Display',serif;">Bebidas</h2>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="menu-item rounded-xl p-3 text-center"
               onclick="addToCart('Refrigerante Lata', 6.00, 'ü•§')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <span class="text-2xl">ü•§</span>
            <h3 class="font-medium mt-1" style="color:#fef3c7;">Refrigerante Lata</h3>
            <span class="text-lg font-bold" style="color:#d97706;">R$ 6,00</span>
          </div>

          <div class="menu-item rounded-xl p-3 text-center"
               onclick="addToCart('Suco Natural', 12.00, 'üßÉ')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <span class="text-2xl">üßÉ</span>
            <h3 class="font-medium mt-1" style="color:#fef3c7;">Suco Natural</h3>
            <span class="text-lg font-bold" style="color:#d97706;">R$ 12,00</span>
          </div>

          <div class="menu-item rounded-xl p-3 text-center"
               onclick="addToCart('Cerveja Long Neck', 14.00, 'üç∫')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <span class="text-2xl">üç∫</span>
            <h3 class="font-medium mt-1" style="color:#fef3c7;">Cerveja Long Neck</h3>
            <span class="text-lg font-bold" style="color:#d97706;">R$ 14,00</span>
          </div>

          <div class="menu-item rounded-xl p-3 text-center"
               onclick="addToCart('√Ågua Mineral', 4.00, 'üíß')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <span class="text-2xl">üíß</span>
            <h3 class="font-medium mt-1" style="color:#fef3c7;">√Ågua Mineral</h3>
            <span class="text-lg font-bold" style="color:#d97706;">R$ 4,00</span>
          </div>
        </div>
      </section>

      <!-- Sobremesas -->
      <section class="mb-8">
        <div class="category-header flex items-center gap-3 mb-4 pb-2" style="border-bottom:2px solid #d97706;">
          <span class="category-icon text-3xl">üç∞</span>
          <h2 class="text-2xl font-bold" style="color:#d97706;font-family:'Playfair Display',serif;">Sobremesas</h2>
        </div>

        <div class="space-y-3">
          <div class="menu-item rounded-xl p-4 relative"
               onclick="addToCart('Petit G√¢teau', 24.90, 'üç´')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="badge absolute -top-2 -right-2 px-3 py-1 rounded-full text-xs font-bold"
                 style="background:linear-gradient(135deg,#ec4899 0%,#db2777 100%);color:#fff;">üíñ Queridinho</div>
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Petit G√¢teau</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Chocolate quente com sorvete e calda.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 24,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4"
               onclick="addToCart('Cheesecake de Frutas', 19.90, 'üçì')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Cheesecake de Frutas</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Cremoso com cobertura da esta√ß√£o.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 19,90</span></div>
            </div>
          </div>

          <div class="menu-item rounded-xl p-4"
               onclick="addToCart('Brownie com Sorvete', 22.90, 'üç¶')"
               style="background:linear-gradient(135deg,#262626 0%,#1f1f1f 100%);border:1px solid #404040;">
            <div class="flex justify-between items-start">
              <div class="flex-1 pr-4">
                <h3 class="font-semibold text-lg" style="color:#fef3c7;">Brownie com Sorvete</h3>
                <p class="text-sm mt-1 opacity-80" style="color:#d6d3d1;">Brownie artesanal com calda.</p>
                <p class="text-xs mt-2" style="color:#9ca3af;">Clique para adicionar ao carrinho</p>
              </div>
              <div class="text-right"><span class="text-2xl font-bold" style="color:#d97706;">R$ 22,90</span></div>
            </div>
          </div>
        </div>
      </section>

      <!-- WhatsApp CTA -->
      <div class="sticky bottom-4 z-50 px-4">
        <div class="delivery-animation mb-3 flex items-center justify-center gap-2">
          <span class="delivery-bike text-4xl">üèçÔ∏è</span>
          <span class="delivery-person text-3xl">üßë‚Äçüç≥</span>
          <span class="delivery-box text-3xl">üì¶</span>
          <span class="delivery-sparkle text-2xl">‚ú®</span>
        </div>

        <a id="whatsapp-btn"
           href="https://wa.me/5511999999999?text=Ol√°! Gostaria de fazer um pedido"
           target="_blank" rel="noopener noreferrer"
           class="whatsapp-btn block w-full py-4 rounded-full text-center font-bold text-lg shadow-lg"
           style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; font-family: 'Poppins', sans-serif; box-shadow: 0 4px 20px rgba(34, 197, 94, 0.4);">
          üì≤ Pe√ßa agora pelo WhatsApp
        </a>
      </div>

      <!-- Footer -->
      <footer class="mt-8 pb-24 text-center">
        <div class="py-6 rounded-xl mx-4"
             style="background: linear-gradient(135deg, #262626 0%, #1f1f1f 100%); border: 1px solid #404040;">
          <p class="text-sm opacity-80" style="color: #d6d3d1;">üìç Delivery e Retirada</p>
          <p class="text-sm mt-1 opacity-60" style="color: #d6d3d1;">Seg a Dom: 11h √†s 23h</p>
          <div class="flex justify-center gap-4 mt-4">
            <span class="text-2xl">üí≥</span><span class="text-2xl">üíµ</span><span class="text-2xl">üì±</span>
          </div>
          <p class="text-xs mt-3 opacity-40" style="color: #d6d3d1;">Aceitamos Cart√£o, Dinheiro e Pix</p>
        </div>
      </footer>

    </main>

    <!-- Floating cart button -->
    <div id="cart-btn" class="cart-fab" onclick="openCart()">
      üõí Carrinho <span id="cart-count" class="cart-badge">0</span>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="modal-overlay">
      <div class="modal-content p-6">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold" style="color:#d97706; font-family:'Playfair Display',serif;">Seu Carrinho üõí</h2>
          <button onclick="closeCart()" class="text-3xl" style="color:#d6d3d1;">√ó</button>
        </div>

        <div id="cart-items" class="space-y-3 mb-6"></div>

        <div class="border-t pt-4 mb-6" style="border-color:#404040;">
          <div class="flex justify-between items-center mb-2">
            <span class="text-lg" style="color:#d6d3d1;">Subtotal:</span>
            <span id="cart-total" class="text-2xl font-bold" style="color:#d97706;">R$ 0,00</span>
          </div>
        </div>

        <button onclick="openCheckout()" class="w-full py-4 rounded-xl font-bold text-lg"
                style="background: linear-gradient(135deg, #d97706 0%, #b45309 100%); color: #1a1a1a;">
          Finalizar Pedido üéØ
        </button>
      </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal-overlay">
      <div class="modal-content p-6">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold" style="color:#d97706; font-family:'Playfair Display',serif;">Dados de Entrega üìç</h2>
          <button onclick="closeCheckout()" class="text-3xl" style="color:#d6d3d1;">√ó</button>
        </div>

        <form id="checkout-form" class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2" style="color:#fef3c7;">Nome Completo</label>
            <input type="text" id="customer-name" required class="w-full px-4 py-3 rounded-lg"
                   style="background:#1a1a1a; border:1px solid #404040; color:#fef3c7;" placeholder="Seu nome">
          </div>

          <div>
            <label class="block text-sm font-medium mb-2" style="color:#fef3c7;">Telefone</label>
            <input type="tel" id="customer-phone" required class="w-full px-4 py-3 rounded-lg"
                   style="background:#1a1a1a; border:1px solid #404040; color:#fef3c7;" placeholder="(11) 99999-9999">
          </div>

          <div>
            <label class="block text-sm font-medium mb-2" style="color:#fef3c7;">CEP</label>
            <input type="text" id="customer-cep" required maxlength="9" class="w-full px-4 py-3 rounded-lg"
                   style="background:#1a1a1a; border:1px solid #404040; color:#fef3c7;" placeholder="00000-000">
          </div>

          <div>
            <label class="block text-sm font-medium mb-2" style="color:#fef3c7;">Endere√ßo</label>
            <input type="text" id="customer-address" required class="w-full px-4 py-3 rounded-lg"
                   style="background:#1a1a1a; border:1px solid #404040; color:#fef3c7;" placeholder="Rua, n√∫mero">
          </div>

          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-sm font-medium mb-2" style="color:#fef3c7;">Bairro</label>
              <input type="text" id="customer-neighborhood" required class="w-full px-4 py-3 rounded-lg"
                     style="background:#1a1a1a; border:1px solid #404040; color:#fef3c7;" placeholder="Bairro">
            </div>
            <div>
              <label class="block text-sm font-medium mb-2" style="color:#fef3c7;">Cidade</label>
              <input type="text" id="customer-city" required class="w-full px-4 py-3 rounded-lg"
                     style="background:#1a1a1a; border:1px solid #404040; color:#fef3c7;" placeholder="Cidade">
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium mb-2" style="color:#fef3c7;">Complemento (Opcional)</label>
            <input type="text" id="customer-complement" class="w-full px-4 py-3 rounded-lg"
                   style="background:#1a1a1a; border:1px solid #404040; color:#fef3c7;" placeholder="Apto, bloco...">
          </div>

          <button type="submit" class="w-full py-4 rounded-xl font-bold text-lg"
                  style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white;">
            Enviar Pedido pelo WhatsApp üì≤
          </button>
        </form>
      </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal-overlay">
      <div class="modal-content p-8 text-center">
        <div class="text-8xl mb-4">‚úÖ</div>
        <h2 class="text-3xl font-bold mb-3" style="color:#22c55e; font-family:'Playfair Display',serif;">Pedido Pronto pra Enviar!</h2>
        <p class="text-lg mb-6" style="color:#d6d3d1;">Abriremos o WhatsApp para voc√™ confirmar e enviar. üéâ</p>

        <div class="mb-6 p-4 rounded-xl" style="background:#1a1a1a; border:1px solid #404040;">
          <p class="text-sm mb-2" style="color:#fef3c7;">Tempo estimado de entrega:</p>
          <p class="text-2xl font-bold" style="color:#d97706;">30-45 minutos ‚è±Ô∏è</p>
        </div>

        <p class="text-sm mb-6" style="color:#d6d3d1;">Enquanto isso, que tal jogar um pouquinho? üéÆ</p>

        <button onclick="startGame()" class="w-full py-4 rounded-xl font-bold text-lg mb-3"
                style="background: linear-gradient(135deg, #d97706 0%, #b45309 100%); color: #1a1a1a;">
          Jogar Agora! üïπÔ∏è
        </button>

        <button onclick="closeSuccess()" class="text-sm" style="color:#d6d3d1;">Voltar ao card√°pio</button>
      </div>
    </div>

    <!-- Game Modal -->
    <div id="game-modal" class="modal-overlay">
      <div class="modal-content p-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold" style="color:#d97706; font-family:'Playfair Display',serif;">Subway Surfers üéÆ</h2>
          <button onclick="closeGame()" class="text-3xl" style="color:#d6d3d1;">√ó</button>
        </div>

        <p class="text-sm mb-4" style="color:#d6d3d1;">
          Alguns jogos bloqueiam abrir dentro do site. Se acontecer, use ‚ÄúAbrir em outra aba‚Äù.
        </p>

        <div class="flex flex-col sm:flex-row gap-3 mb-4">
          <button onclick="loadSubway()" class="px-4 py-3 rounded-xl font-bold"
                  style="background: linear-gradient(135deg, #d97706 0%, #b45309 100%); color:#1a1a1a;">
            Carregar no modal ‚ñ∂Ô∏è
          </button>

          <a href="https://subway-surfers.gg/" target="_blank" rel="noopener noreferrer"
             class="px-4 py-3 rounded-xl font-bold text-center"
             style="background: #1a1a1a; border:1px solid #404040; color:#fef3c7;">
            Abrir em outra aba ‚ÜóÔ∏è
          </a>
        </div>

        <iframe id="subway-frame"
                class="game-frame"
                title="Subway Surfers"
                loading="lazy"
                referrerpolicy="no-referrer"
                allow="fullscreen; autoplay; gamepad"
                sandbox="allow-same-origin allow-scripts allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"></iframe>
      </div>
    </div>

  </div>

  <script>
    // =========================
    // STATE
    // =========================
    let cart = [];

    const defaultConfig = {
      restaurant_name: 'Sabor & Arte',
      slogan: 'Sabor que conquista no primeiro pedido',
      whatsapp_number: '5511999999999',
      promo_title: 'Promo√ß√£o do Dia',
      promo_description: '20% OFF em todos os lanches!',
      background_color: '#1a1a1a',
      accent_color: '#d97706',
      text_color: '#fef3c7',
      card_color: '#262626',
      highlight_color: '#b91c1c'
    };

    // =========================
    // CART
    // =========================
    function addToCart(name, price, emoji) {
      const existing = cart.find(i => i.name === name);
      if (existing) existing.quantity++;
      else cart.push({ name, price, emoji, quantity: 1 });

      updateCartUI();
      showToast(`${emoji} ${name} adicionado!`);
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      updateCartUI();
    }

    function updateQuantity(index, delta) {
      cart[index].quantity += delta;
      if (cart[index].quantity <= 0) removeFromCart(index);
      else updateCartUI();
    }

    function updateCartUI() {
      const cartBtn = document.getElementById('cart-btn');
      const cartCount = document.getElementById('cart-count');
      const cartItems = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');

      const totalItems = cart.reduce((s, i) => s + i.quantity, 0);
      const totalPrice = cart.reduce((s, i) => s + i.price * i.quantity, 0);

      if (cartBtn && cartCount) {
        if (totalItems > 0) {
          cartBtn.style.display = 'inline-flex';
          cartCount.textContent = totalItems;
        } else {
          cartBtn.style.display = 'none';
        }
      }

      if (cartItems) {
        if (cart.length === 0) {
          cartItems.innerHTML = '<p class="text-center py-8" style="color:#d6d3d1;">Seu carrinho est√° vazio</p>';
        } else {
          cartItems.innerHTML = cart.map((item, idx) => `
            <div class="flex items-center gap-3 p-3 rounded-lg" style="background:#1a1a1a; border:1px solid #404040;">
              <span class="text-2xl">${item.emoji}</span>
              <div class="flex-1">
                <h4 class="font-semibold" style="color:#fef3c7;">${item.name}</h4>
                <p class="text-sm" style="color:#d97706;">R$ ${item.price.toFixed(2)}</p>
              </div>

              <div class="flex items-center gap-2">
                <button onclick="updateQuantity(${idx}, -1)" class="w-8 h-8 rounded-full font-bold"
                        style="background:#404040; color:#fef3c7;">-</button>
                <span class="w-8 text-center font-bold" style="color:#fef3c7;">${item.quantity}</span>
                <button onclick="updateQuantity(${idx}, 1)" class="w-8 h-8 rounded-full font-bold"
                        style="background:#d97706; color:#1a1a1a;">+</button>
              </div>

              <button onclick="removeFromCart(${idx})" class="text-xl" style="color:#ef4444;">üóëÔ∏è</button>
            </div>
          `).join('');
        }
      }

      if (cartTotal) cartTotal.textContent = `R$ ${totalPrice.toFixed(2)}`;
    }

    function openCart() {
      if (cart.length === 0) { showToast('‚ö†Ô∏è Adicione itens ao carrinho primeiro!'); return; }
      document.getElementById('cart-modal').classList.add('active');
    }

    function closeCart() { document.getElementById('cart-modal').classList.remove('active'); }

    function openCheckout() {
      if (cart.length === 0) return;
      closeCart();
      document.getElementById('checkout-modal').classList.add('active');
    }

    function closeCheckout() { document.getElementById('checkout-modal').classList.remove('active'); }

    function closeSuccess() {
      document.getElementById('success-modal').classList.remove('active');
      cart = [];
      updateCartUI();
    }

    // =========================
    // TOAST
    // =========================
    function showToast(message) {
      const toast = document.createElement('div');
      toast.textContent = message;
      toast.style.cssText = `
        position: fixed;
        top: 80px;
        right: 20px;
        background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
        color: #1a1a1a;
        padding: 12px 18px;
        border-radius: 999px;
        font-weight: 800;
        z-index: 5000;
        box-shadow: 0 10px 30px rgba(0,0,0,.35);
      `;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2200);
    }

    // =========================
    // CHECKOUT -> WHATSAPP
    // =========================
    const checkoutForm = document.getElementById('checkout-form');
    if (checkoutForm) {
      checkoutForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const name = document.getElementById('customer-name').value.trim();
        const phone = document.getElementById('customer-phone').value.trim();
        const cep = document.getElementById('customer-cep').value.trim();
        const address = document.getElementById('customer-address').value.trim();
        const neighborhood = document.getElementById('customer-neighborhood').value.trim();
        const city = document.getElementById('customer-city').value.trim();
        const complement = document.getElementById('customer-complement').value.trim();

        const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

        let message = `üçΩÔ∏è *NOVO PEDIDO*\\n\\n`;
        message += `üë§ *Cliente:* ${name}\\n`;
        message += `üì± *Telefone:* ${phone}\\n\\n`;
        message += `üìç *Endere√ßo de Entrega:*\\n`;
        message += `${address}\\n`;
        message += `Bairro: ${neighborhood}\\n`;
        message += `Cidade: ${city}\\n`;
        message += `CEP: ${cep}\\n`;
        if (complement) message += `Complemento: ${complement}\\n`;

        message += `\\nüõí *Itens do Pedido:*\\n\\n`;
        cart.forEach(item => {
          message += `${item.emoji} ${item.quantity}x ${item.name}\\n`;
          message += `   R$ ${(item.price * item.quantity).toFixed(2)}\\n\\n`;
        });

        message += `üí∞ *TOTAL: R$ ${totalPrice.toFixed(2)}*\\n\\n`;
        message += `‚è±Ô∏è Tempo estimado: 30-45 minutos`;

        const sdkNumber = window.elementSdk?.config?.whatsapp_number;
        const whatsappNumber = (sdkNumber || defaultConfig.whatsapp_number || '').replace(/\D/g, '');

        const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;

        closeCheckout();
        document.getElementById('success-modal').classList.add('active');

        setTimeout(() => {
          window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
        }, 700);

        checkoutForm.reset();
      });
    }

    // CEP mask
    const cepInput = document.getElementById('customer-cep');
    if (cepInput) {
      cepInput.addEventListener('input', function(e) {
        let v = e.target.value.replace(/\D/g, '');
        if (v.length > 5) v = v.slice(0,5) + '-' + v.slice(5,8);
        e.target.value = v;
      });
    }

    // Close modals on overlay click
    document.querySelectorAll('.modal-overlay').forEach(modal => {
      modal.addEventListener('click', function(e) {
        if (e.target === this) this.classList.remove('active');
      });
    });

    // =========================
    // GAME (Subway Surfers)
    // =========================
    function startGame() {
      document.getElementById('success-modal').classList.remove('active');
      document.getElementById('game-modal').classList.add('active');
      loadSubway();
    }

    function closeGame() {
      document.getElementById('game-modal').classList.remove('active');
      const frame = document.getElementById('subway-frame');
      if (frame) frame.src = '';
    }

    function loadSubway() {
      const frame = document.getElementById('subway-frame');
      if (!frame) return;
      frame.src = 'https://subway-surfers.gg/';
    }

    // =========================
    // SDK (Canva element_sdk)
    // =========================
    function lightenColor(color, percent) {
      const num = parseInt(String(color).replace('#',''), 16);
      const amt = Math.round(2.55 * percent);
      const R = Math.min(255, (num >> 16) + amt);
      const G = Math.min(255, ((num >> 8) & 0x00FF) + amt);
      const B = Math.min(255, (num & 0x0000FF) + amt);
      return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }

    async function onConfigChange(config) {
      const nameEl = document.getElementById('restaurant-name');
      if (nameEl) nameEl.textContent = config.restaurant_name || defaultConfig.restaurant_name;

      const sloganEl = document.getElementById('slogan');
      if (sloganEl) sloganEl.textContent = config.slogan || defaultConfig.slogan;

      const promoTitleEl = document.getElementById('promo-title');
      if (promoTitleEl) promoTitleEl.textContent = config.promo_title || defaultConfig.promo_title;

      const promoDescEl = document.getElementById('promo-description');
      if (promoDescEl) promoDescEl.textContent = config.promo_description || defaultConfig.promo_description;

      const whatsappBtn = document.getElementById('whatsapp-btn');
      const whatsappNumber = (config.whatsapp_number || defaultConfig.whatsapp_number || '').replace(/\D/g,'');
      if (whatsappBtn) {
        whatsappBtn.href = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent('Ol√°! Gostaria de fazer um pedido')}`;
      }

      const wrapper = document.getElementById('app-wrapper');
      const bgColor = config.background_color || defaultConfig.background_color;
      if (wrapper) {
        wrapper.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${lightenColor(bgColor, 18)} 100%)`;
      }

      // recolor accents (safe: only inline colors that match your original)
      const accentColor = config.accent_color || defaultConfig.accent_color;
      const textColor = config.text_color || defaultConfig.text_color;

      document.querySelectorAll('[style*="color:#d97706"],[style*="color: #d97706"]').forEach(el => {
        el.style.color = accentColor;
      });
      document.querySelectorAll('[style*="color:#fef3c7"],[style*="color: #fef3c7"]').forEach(el => {
        el.style.color = textColor;
      });
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          { get: () => config.background_color || defaultConfig.background_color, set: (v) => window.elementSdk.setConfig({ background_color: v }) },
          { get: () => config.text_color || defaultConfig.text_color, set: (v) => window.elementSdk.setConfig({ text_color: v }) },
          { get: () => config.accent_color || defaultConfig.accent_color, set: (v) => window.elementSdk.setConfig({ accent_color: v }) },
          { get: () => config.highlight_color || defaultConfig.highlight_color, set: (v) => window.elementSdk.setConfig({ highlight_color: v }) }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['restaurant_name', config.restaurant_name || defaultConfig.restaurant_name],
        ['slogan', config.slogan || defaultConfig.slogan],
        ['whatsapp_number', config.whatsapp_number || defaultConfig.whatsapp_number],
        ['promo_title', config.promo_title || defaultConfig.promo_title],
        ['promo_description', config.promo_description || defaultConfig.promo_description]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // init UI
    updateCartUI();
  </script>
</body>
</html>
